<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Manual Book Odoo RAHO</title>

<style>

body{
margin:0;
font-family:Arial;
display:flex;
height:100vh;
}

/* SIDEBAR */
.sidebar{
width:260px;
background:#2f3640;
color:white;
padding:20px;
overflow:auto;
}

.sidebar h2{
margin-top:0;
}

.sidebar a{
display:block;
color:white;
padding:8px;
cursor:pointer;
text-decoration:none;
border-radius:5px;
}

.sidebar a:hover{
background:#414b57;
}

/* CONTENT */
.content{
flex:1;
padding:25px;
background:#f5f6fa;
}

/* SEARCH */
input{
width:100%;
padding:10px;
margin-bottom:20px;
border-radius:8px;
border:1px solid #ddd;
}

/* MODAL */
.modal{
display:none;
position:fixed;
left:0;
top:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.7);
}

.modal-content{
background:white;
width:90%;
height:90%;
margin:2% auto;
border-radius:10px;
overflow:hidden;
position:relative;
}

.close{
position:absolute;
right:15px;
top:10px;
font-size:25px;
cursor:pointer;
}

iframe{
width:100%;
height:100%;
border:none;
}

</style>
</head>

<body>

<div class="sidebar">
<h2>Manual Odoo</h2>

<input type="text" id="search" placeholder="Search guide...">

<div id="menu"></div>

</div>

<div class="content">
<h1>Manual Book Odoo RAHO</h1>
<p>Pilih guide di sidebar</p>
</div>


<!-- MODAL -->
<div id="pdfModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closePDF()">âœ–</span>
    <iframe id="pdfFrame"></iframe>
  </div>
</div>


<script>

let allData = {}

fetch('guides.json')
.then(res => res.json())
.then(data => {
    allData = data
    renderMenu(data)
})

function renderMenu(data){

let html=""

for(let role in data){

html += `<h3>${role}</h3>`

data[role].forEach(g=>{
html += `
<a onclick="openPDF('${g.file}')">
${g.title}
</a>
`
})

}

document.getElementById("menu").innerHTML = html
}


/* SEARCH */
document.getElementById("search").addEventListener("input",function(){

let keyword = this.value.toLowerCase()

let filtered={}

for(let role in allData){

filtered[role] = allData[role].filter(g =>
g.title.toLowerCase().includes(keyword)
)

}

renderMenu(filtered)

})


/* OPEN PDF */
function openPDF(file){

if(window.innerWidth < 768){
window.open(file,'_blank')
return
}

document.getElementById("pdfModal").style.display="block"
document.getElementById("pdfFrame").src=file

}

function closePDF(){
document.getElementById("pdfModal").style.display="none"
document.getElementById("pdfFrame").src=""
}

</script>

</body>
</html>
